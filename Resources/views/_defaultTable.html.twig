{# src/Kilik/TableBundle/Resources/views/_defaultTable.html.twig #}
{# @param Kilik\Components\Table table #}
{{ form_start(table.formView) }}
<div class="panel panel-info">        
    <div class="panel-heading">        
        <div class="panel-title">
            {% block tablePagination %}
                <div id="{{ table.id }}_pagination" class="btn-group">
                    {% block tablePaginationAjax %}
                        {% include "KilikTableBundle::_paginationNumbersIcons.html.twig" %}
                    {% endblock tablePaginationAjax %}
                </div>
            {% endblock tablePagination %}
            {% block tableTitle %}
                Default title
            {% endblock tableTitle %}
        </div>
    </div>        
    <div class="panel-body">        
        <table class="table table-responsive table-hover table-striped table-bordered">
            <thead>
                {% block tableHead %}
                    <tr>
                        {% block tableHeadStdColumns %}
                            {% for column in table.columns %}
                                {% if column.sortable %}
                                    <th class="columnSortable" data-sort-column="{{ column.name }}">
                                        <a href="#">
                                            {{ column.label }}
                                        </a>
                                        {# todo: tester si la colonne est tri√©e #}
                                        <span class="glyphicon glyphicon-sort columnSortableIcon"></span>
                                    </th>
                                {% else %}
                                    <th>
                                        {{ column.label }}
                                    </th>
                                {% endif %}
                            {% endfor %}
                        {% endblock tableHeadStdColumns %}
                    </tr>
                    {% if table.columns|length > 0 %}
                        <tr>
                            {% block tableHeadStdFilters %}
                                {% for column in table.columns %}
                                    <td>
                                        {% if column.filter is not null %}
                                            {{ form_widget(attribute(table.formView,column.filter.name ),{"attr": {"class": "form-control refreshOnKeyup"} }) }}
                                        {% endif %}
                                    </td>
                                {% endfor %}
                            {% endblock tableHeadStdFilters %}
                        </tr>
                    {% endif %}
                {% endblock tableHead %}
            </thead>    
            <tbody id="{{ table.bodyId }}">
                {% block tableBody %}
                    {% if tableRenderBody is defined %}
                        {% for row in rows %}
                            <tr>
                                {% block tableBodyStdColumns %}
                                    {% for column in table.columns %}
                                        <td>
                                            {% if column.name is not null %}
                                                {{ attribute(row,column.name) }}
                                            {% endif %}
                                        </td>
                                    {% endfor %}
                                {% endblock tableBodyStdColumns %}
                            </tr>
                        {% endfor %}
                    {% endif %}
                {% endblock tableBody %}
            </tbody>
        </table>
    </div>        
    <div class="panel-foot">        
        {% block tableStats %}
            <div id="{{ table.id }}_stats">
                {% block tableStatsAjax %}
                    {% include "KilikTableBundle::_stats.html.twig" %}
                {% endblock tableStatsAjax %}
            </div>
        {% endblock tableStats %}
    </div>        
</div>        
{{ form_end(table.formView) }}
